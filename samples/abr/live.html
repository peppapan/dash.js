<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Custom ABR Rules</title>

    <script src="../../dist/dash.all.debug.js"></script>

    <!-- Bootstrap core CSS -->
    <link href="../lib/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="../lib/main.css" rel="stylesheet">

    <video muted autoplay="autoplay">
        <style>
            video {
                width: 640px;
                height: 360px;
            }
        </style>

        <script src="LowestBitrateRule.js" class="code"></script>

        <!-- <body>
    <h1>aa</h1>
    <button id="butOpenFile">butOpenFile</button>
    <button id="butDirectory">butDirectory</button> -->


        <script class="code">

            function init() {
                var player1, video;
                var MPD_2S_SEGMENTS = 'http://127.0.0.1:8000/live/stream/index.mpd';

                video = document.querySelector('#video1');
                player1 = dashjs.MediaPlayer().create();
                player1.initialize(video, MPD_2S_SEGMENTS, true);
                player1.updateSettings({ 'streaming': { 'delay': { 'liveDelay': 2 } } });


                setInterval(function () {
                    var d = new Date();
                    var seconds = d.getSeconds();
                    document.querySelector('#sec').innerHTML = (seconds < 10 ? '0' : '') + seconds;
                    var minutes = d.getMinutes();
                    document.querySelector('#min').innerHTML = (minutes < 10 ? '0' : '') + minutes + ':';

                    var p = eval('player');
                    document.querySelector('#video' + 'delay').innerHTML = Math.round((d.getTime() / 1000) - Number(p.timeAsUTC()));
                    document.querySelector('#video' + 'buffer').innerHTML = p.getBufferLength() + 's';
                }, 1000);

            }
            document.addEventListener('DOMContentLoaded', function () {
                init();
            });



        </script>
</head>

<body>

    <main>
        <div class="container py-4">
            <header class="pb-3 mb-4 border-bottom">
                <img class="" src="../lib/img/dashjs-logo.png" width="200">
            </header>
            <div class="row">
                <div class="col-md-4">
                    <div class="h-100 p-5 bg-light border rounded-3">
                        <h3>Custom ABR Rules</h3>
                        <p>Example showing how to create and define custom ABR rules in dash.js.</p>
                    </div>
                </div>
                <div class="col-md-8">
                    <video controls="true"></video>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div id="code-output"></div>
                </div>
            </div>
            <footer class="pt-3 mt-4 text-muted border-top">
                &copy; DASH-IF
            </footer>
        </div>
    </main>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            init();
        });
    </script>
    <script src="../highlighter.js"></script>
</body>

</html>